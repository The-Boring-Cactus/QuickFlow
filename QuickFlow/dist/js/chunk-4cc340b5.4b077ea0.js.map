{"version":3,"sources":["webpack:///./src/components/Flows.vue?332e","webpack:///./src/vue-blocks/components/VueBlocksContainer.vue?9f76","webpack:///./src/vue-blocks/helpers/dom.js","webpack:///./src/vue-blocks/helpers/mouse.js","webpack:///./src/vue-blocks/components/VueBlock.vue?552e","webpack:///src/vue-blocks/components/VueBlock.vue","webpack:///./src/vue-blocks/components/VueBlock.vue?5f85","webpack:///./src/vue-blocks/components/VueBlock.vue?8236","webpack:///./src/vue-blocks/components/VueLink.vue?23b0","webpack:///src/vue-blocks/components/VueLink.vue","webpack:///./src/vue-blocks/components/VueLink.vue?7317","webpack:///./src/vue-blocks/components/VueLink.vue","webpack:///src/vue-blocks/components/VueBlocksContainer.vue","webpack:///./src/vue-blocks/components/VueBlocksContainer.vue?1ac6","webpack:///./src/vue-blocks/components/VueBlocksContainer.vue?1a7a","webpack:///./src/vue-blocks/components/VueBlockProperty.vue?f967","webpack:///src/vue-blocks/components/VueBlockProperty.vue","webpack:///./src/vue-blocks/components/VueBlockProperty.vue?dfb5","webpack:///./src/vue-blocks/components/VueBlockProperty.vue?16c1","webpack:///src/components/Flows.vue","webpack:///./src/components/Flows.vue?4379","webpack:///./src/components/Flows.vue?ab35","webpack:///./src/vue-blocks/components/VueBlockProperty.vue?c1cb","webpack:///./node_modules/deepmerge/dist/cjs.js","webpack:///./src/vue-blocks/components/VueBlock.vue?80bb","webpack:///./src/vue-blocks/components/VueBlocksContainer.vue?f47f","webpack:///./src/components/Flows.vue?a237"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_l","block","key","name","staticClass","staticStyle","on","$event","addBlock","_v","_s","title","ref","blocks","scene","selectBlock","deselectBlock","selectedBlockProperty","saveProperty","staticRenderFns","lines","_b","id","optionsForChild","updateScene","linkingStart","linkingStop","linkingBreak","blockSelect","blockDelete","getOffsetRect","element","box","getBoundingClientRect","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","top","left","Math","round","getMousePosition","event","mouseX","pageX","clientX","document","documentElement","mouseY","pageY","clientY","offset","x","y","class","selected","style","deleteBlock","slot","index","active","slotMouseUp","slotBreak","label","slotMouseDown","component","p","data","_e","a","transform","link","originID","targetID","originBlock","targetBlock","console","log","originLinkPos","targetLinkPos","x1","y1","x2","y2","stroke","strokeWidth","fill","outlineStyle","strokeOpacity","directives","rawName","value","expression","domProps","target","composing","$set","preventDefault","save","VBtn","VToolbar","isMergeableObject","isNonNullObject","isSpecial","stringValue","Object","prototype","toString","call","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","val","Array","isArray","cloneIfNecessary","optionsArgument","clone","deepmerge","defaultArrayMerge","source","destination","slice","forEach","e","i","indexOf","push","mergeObject","keys","sourceIsArray","targetIsArray","options","arrayMerge","sourceAndTargetTypesMatch","all","array","length","Error","reduce","prev","next","deepmerge_1","module","exports"],"mappings":"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","file":"js/chunk-4cc340b5.4b077ea0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"Flows\"}},[_c('div',{attrs:{\"color\":\"grey lighten-4\",\"tile\":\"\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\"}},_vm._l((_vm.blocks),function(block){return _c('v-btn',{key:block.name,staticClass:\"ma-2\",staticStyle:{\"width\":\"150px\"},on:{\"click\":function($event){return _vm.addBlock(block.name)}}},[_vm._v(\" \"+_vm._s(block.title || block.name)+\" \")])}),1)],1),_c('VueBlocksContainer',{ref:\"container\",staticClass:\"container\",attrs:{\"blocksContent\":_vm.blocks,\"scene\":_vm.scene},on:{\"update:scene\":function($event){_vm.scene=$event},\"blockSelect\":_vm.selectBlock,\"blockDeselect\":_vm.deselectBlock}}),_c('VueBlockProperty',{attrs:{\"inputValues\":_vm.selectedBlockProperty},on:{\"save\":_vm.saveProperty}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-container\"},[_c('VueLink',{attrs:{\"lines\":_vm.lines}}),_vm._l((_vm.blocks),function(block){return _c('VueBlock',_vm._b({key:block.id,attrs:{\"options\":_vm.optionsForChild},on:{\"update\":_vm.updateScene,\"linkingStart\":function($event){return _vm.linkingStart(block, $event)},\"linkingStop\":function($event){return _vm.linkingStop(block, $event)},\"linkingBreak\":function($event){return _vm.linkingBreak(block, $event)},\"select\":function($event){return _vm.blockSelect(block)},\"delete\":function($event){return _vm.blockDelete(block)}}},'VueBlock',block,false,true))})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * @param element {HTMLElement}\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getOffsetRect(element) {\r\n    let box = element.getBoundingClientRect()\r\n\r\n    let scrollTop = window.pageYOffset\r\n    let scrollLeft = window.pageXOffset\r\n\r\n    let top = box.top + scrollTop\r\n    let left = box.left + scrollLeft\r\n\r\n    return { top: Math.round(top), left: Math.round(left) }\r\n}\r\n\r\nexport default {\r\n    getOffsetRect\r\n}","import { getOffsetRect } from './dom'\r\n\r\n/**\r\n * @param event {MouseEvent}\r\n * @param element {HTMLElement}\r\n * @return {{x: number, y: number}}\r\n */\r\nexport function getMousePosition(element, event) {\r\n    let mouseX = event.pageX || event.clientX + document.documentElement.scrollLeft\r\n    let mouseY = event.pageY || event.clientY + document.documentElement.scrollTop\r\n\r\n    let offset = getOffsetRect(element)\r\n    let x = mouseX - offset.left\r\n    let y = mouseY - offset.top\r\n\r\n    return {\r\n        x: x,\r\n        y: y\r\n    }\r\n}\r\n\r\nexport default {\r\n    getMousePosition\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-block\",class:{selected: _vm.selected},style:(_vm.style)},[_c('header',{style:(_vm.headerStyle)},[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('a',{staticClass:\"delete\",on:{\"click\":_vm.deleteBlock}},[_vm._v(\"x\")])]),_c('div',{staticClass:\"inputs\"},_vm._l((_vm.inputs),function(slot,index){return _c('div',{key:index,staticClass:\"input\"},[_c('div',{staticClass:\"circle inputSlot\",class:{active: slot.active},on:{\"mouseup\":function($event){return _vm.slotMouseUp($event, index)},\"mousedown\":function($event){return _vm.slotBreak($event, index)}}}),_vm._v(\" \"+_vm._s(slot.label)+\" \")])}),0),_c('div',{staticClass:\"outputs\"},_vm._l((_vm.outputs),function(slot,index){return _c('div',{key:index,staticClass:\"output\"},[_c('div',{staticClass:\"circle\",class:{active: slot.active},on:{\"mousedown\":function($event){return _vm.slotMouseDown($event, index)}}}),_vm._v(\" \"+_vm._s(slot.label)+\" \")])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vue-block\" :class=\"{selected: selected}\" :style=\"style\">\r\n        <header :style=\"headerStyle\">\r\n            {{title}}\r\n            <a class=\"delete\" @click=\"deleteBlock\">x</a>\r\n        </header>\r\n        <div class=\"inputs\">\r\n            <div class=\"input\" v-for=\"(slot, index) in inputs\" :key=\"index\">\r\n                <div class=\"circle inputSlot\" :class=\"{active: slot.active}\"\r\n                     @mouseup=\"slotMouseUp($event, index)\"\r\n                     @mousedown=\"slotBreak($event, index)\"></div>\r\n                {{slot.label}}\r\n            </div>\r\n        </div>\r\n        <div class=\"outputs\">\r\n            <div class=\"output\" v-for=\"(slot, index) in outputs\" :key=\"index\">\r\n                <div class=\"circle\" :class=\"{active: slot.active}\"\r\n                     @mousedown=\"slotMouseDown($event, index)\"></div>\r\n                {{slot.label}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'VueBlock',\r\n    props: {\r\n      x: {\r\n        type: Number,\r\n        default: 0,\r\n        validator: function (val) {\r\n          return typeof val === 'number'\r\n        }\r\n      },\r\n      y: {\r\n        type: Number,\r\n        default: 0,\r\n        validator: function (val) {\r\n          return typeof val === 'number'\r\n        }\r\n      },\r\n      selected: Boolean,\r\n      title: {\r\n        type: String,\r\n        default: 'Title'\r\n      },\r\n      inputs: Array,\r\n      outputs: Array,\r\n      options: {\r\n        type: Object\r\n      }\r\n    },\r\n    created () {\r\n      this.mouseX = 0\r\n      this.mouseY = 0\r\n      this.lastMouseX = 0\r\n      this.lastMouseY = 0\r\n      this.linking = false\r\n      this.dragging = false\r\n    },\r\n    mounted () {\r\n      document.documentElement.addEventListener('mousemove', this.handleMove, true)\r\n      document.documentElement.addEventListener('mousedown', this.handleDown, true)\r\n      document.documentElement.addEventListener('mouseup', this.handleUp, true)\r\n    },\r\n    beforeDestroy () {\r\n      document.documentElement.removeEventListener('mousemove', this.handleMove, true)\r\n      document.documentElement.removeEventListener('mousedown', this.handleDown, true)\r\n      document.documentElement.removeEventListener('mouseup', this.handleUp, true)\r\n    },\r\n    data () {\r\n      return {\r\n        width: this.options.width,\r\n        hasDragged: false\r\n      }\r\n    },\r\n    methods: {\r\n      handleMove (e) {\r\n        this.mouseX = e.pageX || e.clientX + document.documentElement.scrollLeft\r\n        this.mouseY = e.pageY || e.clientY + document.documentElement.scrollTop\r\n        if (this.dragging && !this.linking) {\r\n          let diffX = this.mouseX - this.lastMouseX\r\n          let diffY = this.mouseY - this.lastMouseY\r\n          this.lastMouseX = this.mouseX\r\n          this.lastMouseY = this.mouseY\r\n          this.moveWithDiff(diffX, diffY)\r\n          this.hasDragged = true\r\n        }\r\n      },\r\n      handleDown (e) {\r\n        this.mouseX = e.pageX || e.clientX + document.documentElement.scrollLeft\r\n        this.mouseY = e.pageY || e.clientY + document.documentElement.scrollTop\r\n        this.lastMouseX = this.mouseX\r\n        this.lastMouseY = this.mouseY\r\n        const target = e.target || e.srcElement\r\n        if (this.$el.contains(target) && e.which === 1) {\r\n          this.dragging = true\r\n          this.$emit('select')\r\n          if (e.preventDefault) e.preventDefault()\r\n        }\r\n      },\r\n      handleUp () {\r\n        if (this.dragging) {\r\n          this.dragging = false\r\n          if (this.hasDragged) {\r\n            this.save()\r\n            this.hasDragged = false\r\n          }\r\n        }\r\n        if (this.linking) {\r\n          this.linking = false\r\n        }\r\n      },\r\n      // Slots\r\n      slotMouseDown (e, index) {\r\n        this.linking = true\r\n        this.$emit('linkingStart', index)\r\n        if (e.preventDefault) e.preventDefault()\r\n      },\r\n      slotMouseUp (e, index) {\r\n        this.$emit('linkingStop', index)\r\n        if (e.preventDefault) e.preventDefault()\r\n      },\r\n      slotBreak (e, index) {\r\n        this.linking = true\r\n        this.$emit('linkingBreak', index)\r\n        if (e.preventDefault) e.preventDefault()\r\n      },\r\n      save () {\r\n        this.$emit('update')\r\n      },\r\n      deleteBlock () {\r\n        this.$emit('delete')\r\n      },\r\n      moveWithDiff (diffX, diffY) {\r\n        let left = this.x + diffX / this.options.scale\r\n        let top = this.y + diffY / this.options.scale\r\n        this.$emit('update:x', left)\r\n        this.$emit('update:y', top)\r\n      }\r\n    },\r\n    computed: {\r\n      style () {\r\n        return {\r\n          top: this.options.center.y + this.y * this.options.scale + 'px',\r\n          left: this.options.center.x + this.x * this.options.scale + 'px',\r\n          width: this.width + 'px',\r\n          transform: 'scale(' + (this.options.scale + '') + ')',\r\n          transformOrigin: 'top left'\r\n        }\r\n      },\r\n      headerStyle () {\r\n        return {\r\n          height: this.options.titleHeight + 'px'\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n    .vue-block {\r\n        position: absolute;\r\n        box-sizing: border-box;\r\n        border: 1px solid black;\r\n        background: white;\r\n        z-index: 1;\r\n        opacity: 0.9;\r\n        cursor: move;\r\n    }\r\n\r\n        .vue-block.selected {\r\n            border: 1px solid red;\r\n            z-index: 2;\r\n        }\r\n\r\n        .vue-block > header {\r\n            background: #bfbfbf;\r\n            text-align: center;\r\n        }\r\n\r\n            .vue-block > header > .delete {\r\n                color: red;\r\n                cursor: pointer;\r\n                float: right;\r\n                position: absolute;\r\n                right: 5px;\r\n            }\r\n\r\n        .vue-block .inputs,\r\n        .vue-block .outputs {\r\n            padding: 2px 0;\r\n            display: block;\r\n            width: 50%;\r\n        }\r\n\r\n            .vue-block .inputs > *,\r\n            .vue-block .outputs > * {\r\n                width: 100%;\r\n            }\r\n\r\n        .vue-block .circle {\r\n            box-sizing: border-box;\r\n            margin-top: 3px;\r\n            width: 10px;\r\n            height: 10px;\r\n            border: 1px solid rgba(0, 0, 0, 0.5);\r\n            border-radius: 100%;\r\n            cursor: crosshair;\r\n        }\r\n\r\n            .vue-block .circle.active {\r\n                background: #FFFF00;\r\n            }\r\n\r\n        .vue-block .inputs {\r\n            float: left;\r\n            text-align: left;\r\n            margin-left: -6px;\r\n        }\r\n\r\n        .vue-block .input,\r\n        .vue-block .output {\r\n            height: 16px;\r\n            overflow: hidden;\r\n            font-size: 14px;\r\n        }\r\n\r\n        .vue-block .input {\r\n            float: left;\r\n        }\r\n\r\n            .vue-block .input .circle {\r\n                float: left;\r\n                margin-right: 2px;\r\n            }\r\n\r\n                .vue-block .input .circle:hover {\r\n                    background: #00FF00;\r\n                }\r\n\r\n                    .vue-block .input .circle:hover.active {\r\n                        background: #FF0000;\r\n                    }\r\n\r\n        .vue-block .outputs {\r\n            float: right;\r\n            text-align: right;\r\n            margin-right: -6px;\r\n        }\r\n\r\n        .vue-block .output {\r\n            float: right;\r\n        }\r\n\r\n            .vue-block .output .circle {\r\n                float: right;\r\n                margin-left: 2px;\r\n            }\r\n\r\n                .vue-block .output .circle:hover {\r\n                    background: #00FF00;\r\n                }\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VueBlock.vue?vue&type=template&id=0a80e481&scoped=true&\"\nimport script from \"./VueBlock.vue?vue&type=script&lang=js&\"\nexport * from \"./VueBlock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VueBlock.vue?vue&type=style&index=0&id=0a80e481&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a80e481\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"width\":\"100%\",\"height\":\"100%\"}},[_vm._l((_vm.renderedPathes),function(p){return _c('g',{key:p.id},[(_vm.outline)?_c('path',{style:(p.outlineStyle),attrs:{\"d\":p.data}}):_vm._e(),_c('path',{style:(p.style),attrs:{\"d\":p.data}})])}),_c('g',_vm._l((_vm.renderedArrows),function(a){return _c('path',{key:a.id,style:(a.style),attrs:{\"d\":\"M -1 -1 L 0 1 L 1 -1 z\",\"transform\":a.transform}})}),0)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <svg width=\"100%\" height=\"100%\">\r\n        <g v-for=\"p in renderedPathes\" :key=\"p.id\">\r\n            <path v-if=\"outline\" :d=\"p.data\" :style=\"p.outlineStyle\"></path>\r\n            <path :d=\"p.data\" :style=\"p.style\"></path>\r\n        </g>\r\n        <g>\r\n            <path v-for=\"a in renderedArrows\" :key=\"a.id\"\r\n                  d=\"M -1 -1 L 0 1 L 1 -1 z\"\r\n                  :style=\"a.style\"\r\n                  :transform=\"a.transform\"></path>\r\n        </g>\r\n    </svg>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      lines: {\r\n        type: Array,\r\n        default () {\r\n          return []\r\n        }\r\n      },\r\n      outline: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    methods: {\r\n      distance (x1, y1, x2, y2) {\r\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\r\n      },\r\n      computeConnectionPoint (x1, y1, x2, y2, t) {\r\n        let dist = this.distance(x1, y1, x2, y2)\r\n        let p0 = {x: x1, y: y1}\r\n        let p1 = {x: x1 + dist * 0.25, y: y1}\r\n        let p2 = {x: x2 - dist * 0.25, y: y2}\r\n        let p3 = {x: x2, y: y2}\r\n        let c1 = (1 - t) * (1 - t) * (1 - t)\r\n        let c2 = 3 * ((1 - t) * (1 - t)) * t\r\n        let c3 = 3 * (1 - t) * (t * t)\r\n        let c4 = t * t * t\r\n        let x = c1 * p0.x + c2 * p1.x + c3 * p2.x + c4 * p3.x\r\n        let y = c1 * p0.y + c2 * p1.y + c3 * p2.y + c4 * p3.y\r\n        return {x: x, y: y}\r\n      }\r\n    },\r\n    computed: {\r\n      renderedPathes () {\r\n        if (!this.lines) {\r\n          return []\r\n        }\r\n        let pathes = []\r\n        this.lines.forEach(l => {\r\n          let dist = this.distance(l.x1, l.y1, l.x2, l.y2) * 0.25\r\n          pathes.push({\r\n            data: `M ${l.x1}, ${l.y1} C ${(l.x1 + dist)}, ${l.y1}, ${(l.x2 - dist)}, ${l.y2}, ${l.x2}, ${l.y2}`,\r\n            style: l.style,\r\n            outlineStyle: l.outlineStyle\r\n          })\r\n        })\r\n        return pathes\r\n      },\r\n      renderedArrows () {\r\n        if (!this.lines) {\r\n          return []\r\n        }\r\n        let arrows = []\r\n        this.lines.forEach(l => {\r\n          // l.x1, l.y1, l.x2, l.y2\r\n          let pos = this.computeConnectionPoint(l.x1, l.y1, l.x2, l.y2, 0.5)\r\n          let pos2 = this.computeConnectionPoint(l.x1, l.y1, l.x2, l.y2, 0.51)\r\n          let angle = -Math.atan2(pos2.x - pos.x, pos2.y - pos.y)\r\n          let degrees = (angle >= 0 ? angle : (2 * Math.PI + angle)) * 180 / Math.PI\r\n          arrows.push({\r\n            transform: `translate(${pos.x}, ${pos.y}) rotate(${degrees})`,\r\n            style: {\r\n              stroke: l.style.stroke,\r\n              strokeWidth: l.style.strokeWidth * 2,\r\n              fill: l.style.stroke\r\n            }\r\n          })\r\n        })\r\n        return arrows\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VueLink.vue?vue&type=template&id=4d67a627&scoped=true&\"\nimport script from \"./VueLink.vue?vue&type=script&lang=js&\"\nexport * from \"./VueLink.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d67a627\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"vue-container\">\r\n        <VueLink :lines=\"lines\" />\r\n        <VueBlock v-for=\"block in blocks\"\r\n                  :key=\"block.id\"\r\n                  v-bind.sync=\"block\"\r\n                  :options=\"optionsForChild\"\r\n                  @update=\"updateScene\"\r\n                  @linkingStart=\"linkingStart(block, $event)\"\r\n                  @linkingStop=\"linkingStop(block, $event)\"\r\n                  @linkingBreak=\"linkingBreak(block, $event)\"\r\n                  @select=\"blockSelect(block)\"\r\n                  @delete=\"blockDelete(block)\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import merge from 'deepmerge'\r\n  import mouseHelper from '../helpers/mouse'\r\n  import VueBlock from './VueBlock'\r\n  import VueLink from './VueLink'\r\n  export default {\r\n    name: 'VueBlockContainer',\r\n    components: {\r\n      VueBlock,\r\n      VueLink\r\n    },\r\n    props: {\r\n      blocksContent: {\r\n        type: Array,\r\n        default () {\r\n          return []\r\n        }\r\n      },\r\n      scene: {\r\n        type: Object,\r\n          default: () => {\r\n             return { blocks: [], links: [], container: { } }\r\n          }\r\n      },\r\n      options: {\r\n        type: Object\r\n      }\r\n    },\r\n    mounted () {\r\n      document.documentElement.addEventListener('mousemove', this.handleMove, true)\r\n      document.documentElement.addEventListener('mousedown', this.handleDown, true)\r\n      document.documentElement.addEventListener('mouseup', this.handleUp, true)\r\n      document.documentElement.addEventListener('wheel', this.handleWheel, true)\r\n      this.centerX = this.$el.clientWidth / 2\r\n      this.centerY = this.$el.clientHeight / 2\r\n      this.importBlocksContent()\r\n      this.importScene()\r\n    },\r\n    beforeDestroy () {\r\n      document.documentElement.removeEventListener('mousemove', this.handleMove, true)\r\n      document.documentElement.removeEventListener('mousedown', this.handleDown, true)\r\n      document.documentElement.removeEventListener('mouseup', this.handleUp, true)\r\n      document.documentElement.removeEventListener('wheel', this.handleWheel, true)\r\n    },\r\n    created () {\r\n      this.mouseX = 0\r\n      this.mouseY = 0\r\n      this.lastMouseX = 0\r\n      this.lastMouseY = 0\r\n      this.minScale = 0.2\r\n      this.maxScale = 5\r\n      this.linking = false\r\n      this.linkStartData = null\r\n      this.inputSlotClassName = 'inputSlot'\r\n      this.defaultScene = {\r\n        blocks: [],\r\n        links: [],\r\n        container: {}\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        dragging: false,\r\n        //\r\n        centerX: 0,\r\n        centerY: 0,\r\n        scale: 1,\r\n        //\r\n        nodes: [],\r\n        blocks: [],\r\n        links: [],\r\n        //\r\n        tempLink: null,\r\n        selectedBlock: null,\r\n        hasDragged: false\r\n      }\r\n    },\r\n    computed: {\r\n      optionsForChild () {\r\n        return {\r\n          width: 200,\r\n          titleHeight: 20,\r\n          scale: this.scale,\r\n          inputSlotClassName: this.inputSlotClassName,\r\n          center: {\r\n            x: this.centerX,\r\n            y: this.centerY\r\n          }\r\n        }\r\n      },\r\n      container () {\r\n        return {\r\n          centerX: this.centerX,\r\n          centerY: this.centerY,\r\n          scale: this.scale\r\n        }\r\n      },\r\n      // Links calculate\r\n      lines () {\r\n        let lines_links = []\r\n        for (let link of this.links) {\r\n          let originBlock = this.blocks.find(block => {\r\n            return block.id === link.originID\r\n          })\r\n          let targetBlock = this.blocks.find(block => {\r\n            return block.id === link.targetID\r\n          })\r\n          if (!originBlock || !targetBlock) {\r\n            console.log('Remove invalid link ' + link)\r\n            this.removeLink(link.id)\r\n            continue\r\n          }\r\n          if (originBlock.id === targetBlock.id) {\r\n            console.log('Loop detected, remove link ' + link)\r\n            this.removeLink(link.id)\r\n            continue\r\n          }\r\n          let originLinkPos = this.getConnectionPos(originBlock, link.originSlot, false)\r\n          let targetLinkPos = this.getConnectionPos(targetBlock, link.targetSlot, true)\r\n          if (!originLinkPos || !targetLinkPos) {\r\n            console.log('Remove invalid link (slot not exist) ' + link)\r\n            this.removeLink(link.id)\r\n            continue\r\n          }\r\n          let x1 = originLinkPos.x\r\n          let y1 = originLinkPos.y\r\n          let x2 = targetLinkPos.x\r\n          let y2 = targetLinkPos.y\r\n            lines_links.push({\r\n            x1: x1,\r\n            y1: y1,\r\n            x2: x2,\r\n            y2: y2,\r\n            style: {\r\n              stroke: '#F85',\r\n              strokeWidth: 4 * this.scale,\r\n              fill: 'none'\r\n            },\r\n            outlineStyle: {\r\n              stroke: '#666',\r\n              strokeWidth: 6 * this.scale,\r\n              strokeOpacity: 0.6,\r\n              fill: 'none'\r\n            }\r\n          })\r\n        }\r\n          if (this.tempLink != null) {\r\n              let newtempLink = this.tempLink\r\n              newtempLink.style = {\r\n            stroke: '#8f8f8f',\r\n            strokeWidth: 4 * this.scale,\r\n            fill: 'none'\r\n          }\r\n              lines_links.push(newtempLink)\r\n        }\r\n          return lines_links\r\n      }\r\n    },\r\n    methods: {\r\n      // Events\r\n      /** @param e {MouseEvent} */\r\n      handleMove (e) {\r\n        let mouse = mouseHelper.getMousePosition(this.$el, e)\r\n        this.mouseX = mouse.x\r\n        this.mouseY = mouse.y\r\n        if (this.dragging) {\r\n          let diffX = this.mouseX - this.lastMouseX\r\n          let diffY = this.mouseY - this.lastMouseY\r\n          this.lastMouseX = this.mouseX\r\n          this.lastMouseY = this.mouseY\r\n          this.centerX += diffX\r\n          this.centerY += diffY\r\n          this.hasDragged = true\r\n        }\r\n        if (this.linking && this.linkStartData) {\r\n          let linkStartPos = this.getConnectionPos(this.linkStartData.block, this.linkStartData.slotNumber, false)\r\n          this.tempLink = {\r\n            x1: linkStartPos.x,\r\n            y1: linkStartPos.y,\r\n            x2: this.mouseX,\r\n            y2: this.mouseY\r\n          }\r\n        }\r\n        },\r\n        generateUUID ()  {\r\n            let\r\n                d = new Date().getTime(),\r\n                d2 = (performance && performance.now && (performance.now() * 1000)) || 0;\r\n            return 'xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n                let r = Math.random() * 16\r\n                if (d > 0) {\r\n                    r = (d + r) % 16 | 0\r\n                    d = Math.floor(d / 16)\r\n                } else {\r\n                    r = (d2 + r) % 16 | 0\r\n                    d2 = Math.floor(d2 / 16)\r\n                }\r\n                return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n            })\r\n        },\r\n      handleDown (e) {\r\n        const target = e.target || e.srcElement\r\n        if ((target === this.$el || target.matches('svg, svg *')) && e.which === 1) {\r\n          this.dragging = true\r\n          let mouse = mouseHelper.getMousePosition(this.$el, e)\r\n          this.mouseX = mouse.x\r\n          this.mouseY = mouse.y\r\n          this.lastMouseX = this.mouseX\r\n          this.lastMouseY = this.mouseY\r\n          this.deselectAll()\r\n          if (e.preventDefault) e.preventDefault()\r\n        }\r\n      },\r\n      handleUp (e) {\r\n        const target = e.target || e.srcElement\r\n        if (this.dragging) {\r\n          this.dragging = false\r\n          if (this.hasDragged) {\r\n            this.updateScene()\r\n            this.hasDragged = false\r\n          }\r\n        }\r\n        if (this.$el.contains(target) && (typeof target.className !== 'string' || target.className.indexOf(this.inputSlotClassName) === -1)) {\r\n          this.linking = false\r\n          this.tempLink = null\r\n          this.linkStartData = null\r\n        }\r\n      },\r\n      handleWheel (e) {\r\n        const target = e.target || e.srcElement\r\n        if (this.$el.contains(target)) {\r\n          if (e.preventDefault) e.preventDefault()\r\n          let deltaScale = Math.pow(1.1, e.deltaY * -0.01)\r\n          this.scale *= deltaScale\r\n          if (this.scale < this.minScale) {\r\n            this.scale = this.minScale\r\n            return\r\n          } else if (this.scale > this.maxScale) {\r\n            this.scale = this.maxScale\r\n            return\r\n          }\r\n          let zoomingCenter = {\r\n            x: this.mouseX,\r\n            y: this.mouseY\r\n          }\r\n          let deltaOffsetX = (zoomingCenter.x - this.centerX) * (deltaScale - 1)\r\n          let deltaOffsetY = (zoomingCenter.y - this.centerY) * (deltaScale - 1)\r\n          this.centerX -= deltaOffsetX\r\n          this.centerY -= deltaOffsetY\r\n          this.updateScene()\r\n        }\r\n      },\r\n      // Processing\r\n      getConnectionPos (block, slotNumber, isInput) {\r\n        if (!block || slotNumber === -1) {\r\n          return undefined\r\n        }\r\n        let x = 0\r\n        let y = 0\r\n        x += block.x\r\n        y += block.y\r\n        y += this.optionsForChild.titleHeight\r\n          if (isInput && block.inputs.length > slotNumber) {\r\n              console.log('')\r\n        } else if (!isInput && block.outputs.length > slotNumber) {\r\n          x += this.optionsForChild.width\r\n        } else {\r\n          console.error('slot ' + slotNumber + ' not found, is input: ' + isInput + ' ' + block)\r\n          return undefined\r\n        }\r\n        // (height / 2 + blockBorder + padding)\r\n        y += (16 / 2 + 1 + 2)\r\n        //  + (height * slotNumber)\r\n        y += (16 * slotNumber)\r\n        x *= this.scale\r\n        y *= this.scale\r\n        x += this.centerX\r\n        y += this.centerY\r\n        return {x: x, y: y}\r\n      },\r\n      // Linking\r\n      linkingStart (block, slotNumber) {\r\n        this.linkStartData = {block: block, slotNumber: slotNumber}\r\n        let linkStartPos = this.getConnectionPos(this.linkStartData.block, this.linkStartData.slotNumber, false)\r\n        this.tempLink = {\r\n          x1: linkStartPos.x,\r\n          y1: linkStartPos.y,\r\n          x2: this.mouseX,\r\n          y2: this.mouseY\r\n        }\r\n        this.linking = true\r\n      },\r\n      linkingStop (targetBlock, slotNumber) {\r\n        if (this.linkStartData && targetBlock && slotNumber > -1) {\r\n          this.links = this.links.filter(value => {\r\n            return !(value.targetID === targetBlock.id && value.targetSlot === slotNumber)\r\n          })\r\n          let maxID = Math.max(0, ...this.links.map(function (o) {\r\n            return o.id\r\n          }))\r\n          // skip if looping\r\n          if (this.linkStartData.block.id !== targetBlock.id) {\r\n            this.links.push({\r\n              id: maxID + 1,\r\n              originID: this.linkStartData.block.id,\r\n              originSlot: this.linkStartData.slotNumber,\r\n              targetID: targetBlock.id,\r\n              targetSlot: slotNumber\r\n            })\r\n            this.updateScene()\r\n          }\r\n        }\r\n        this.linking = false\r\n        this.tempLink = null\r\n        this.linkStartData = null\r\n      },\r\n      linkingBreak (targetBlock, slotNumber) {\r\n        if (targetBlock && slotNumber > -1) {\r\n          let findLink = this.links.find(value => {\r\n            return value.targetID === targetBlock.id && value.targetSlot === slotNumber\r\n          })\r\n          if (findLink) {\r\n            let findBlock = this.blocks.find(value => {\r\n              return value.id === findLink.originID\r\n            })\r\n            this.links = this.links.filter(value => {\r\n              return !(value.targetID === targetBlock.id && value.targetSlot === slotNumber)\r\n            })\r\n            this.linkingStart(findBlock, findLink.originSlot)\r\n            this.updateScene()\r\n          }\r\n        }\r\n      },\r\n      removeLink (linkID) {\r\n        this.links = this.links.filter(value => {\r\n          return !(value.id === linkID)\r\n        })\r\n      },\r\n      // Blocks\r\n      addNewBlock (nodeName, x, y) {\r\n        let maxID = Math.max(0, ...this.blocks.map(function (o) {\r\n          return o.id\r\n        }))\r\n        let node = this.nodes.find(n => {\r\n          return n.name === nodeName\r\n        })\r\n        if (!node) {\r\n          return\r\n        }\r\n        let block = this.createBlock(node, maxID + 1)\r\n        // if x or y not set, place block to center\r\n        if (x === undefined || y === undefined) {\r\n          x = (this.$el.clientWidth / 2 - this.centerX) / this.scale\r\n          y = (this.$el.clientHeight / 2 - this.centerY) / this.scale\r\n        } else {\r\n          x = (x - this.centerX) / this.scale\r\n          y = (y - this.centerY) / this.scale\r\n        }\r\n        block.x = x\r\n        block.y = y\r\n        this.blocks.push(block)\r\n        this.updateScene()\r\n      },\r\n      createBlock (node, id) {\r\n        let inputs = []\r\n        let outputs = []\r\n        let values = []\r\n        node.fields.forEach(field => {\r\n          if (field.attr === 'input') {\r\n            inputs.push({\r\n              name: field.name,\r\n              label: field.label || field.name\r\n            })\r\n          } else if (field.attr === 'output') {\r\n            outputs.push({\r\n              name: field.name,\r\n              label: field.label || field.name\r\n            })\r\n          } else {\r\n            let newField = merge({}, field)\r\n              newField['id'] = this.generateUUID()\r\n              values.push(newField)\r\n          }\r\n        })\r\n        return {\r\n          id: id,\r\n          x: 0,\r\n          y: 0,\r\n          selected: false,\r\n          name: node.name,\r\n          title: node.title || node.name,\r\n          inputs: inputs,\r\n          outputs: outputs,\r\n          values: values\r\n        }\r\n      },\r\n      deselectAll (withoutID = null) {\r\n        this.blocks.forEach((value) => {\r\n          if (value.id !== withoutID && value.selected) {\r\n            this.blockDeselect(value)\r\n          }\r\n        })\r\n      },\r\n      // Events\r\n      blockSelect (block) {\r\n        block.selected = true\r\n        this.selectedBlock = block\r\n        this.deselectAll(block.id)\r\n        this.$emit('blockSelect', block)\r\n      },\r\n      blockDeselect (block) {\r\n        block.selected = false\r\n        if (block &&\r\n          this.selectedBlock &&\r\n          this.selectedBlock.id === block.id\r\n        ) {\r\n          this.selectedBlock = null\r\n        }\r\n        this.$emit('blockDeselect', block)\r\n      },\r\n      blockDelete (block) {\r\n        if (block.selected) {\r\n          this.blockDeselect(block)\r\n        }\r\n        this.links.forEach(l => {\r\n          if (l.originID === block.id || l.targetID === block.id) {\r\n            this.removeLink(l.id)\r\n          }\r\n        })\r\n        this.blocks = this.blocks.filter(b => {\r\n          return b.id !== block.id\r\n        })\r\n        this.updateScene()\r\n      },\r\n      //\r\n      prepareBlocks (blocks) {\r\n        return blocks.map(block => {\r\n          let node = this.nodes.find(n => {\r\n            return n.name === block.name\r\n          })\r\n          if (!node) {\r\n            return null\r\n          }\r\n          let newBlock = this.createBlock(node, block.id)\r\n          newBlock = merge(newBlock, block, {\r\n            arrayMerge: (d, s) => {\r\n              return s.length === 0 ? d : s\r\n            }\r\n          })\r\n          return newBlock\r\n        }).filter(b => {\r\n          return !!b\r\n        })\r\n      },\r\n      prepareBlocksLinking (blocks, links) {\r\n        if (!blocks) {\r\n          return []\r\n        }\r\n        let newBlocks = []\r\n        blocks.forEach(block => {\r\n          let inputs = links.filter(link => {\r\n            return link.targetID === block.id\r\n          })\r\n          let outputs = links.filter(link => {\r\n            return link.originID === block.id\r\n          })\r\n          block.inputs.forEach((s, index) => {\r\n            // is linked\r\n            block.inputs[index].active = inputs.some(i => i.targetSlot === index)\r\n          })\r\n          block.outputs.forEach((s, index) => {\r\n            // is linked\r\n            block.outputs[index].active = outputs.some(i => i.originSlot === index)\r\n          })\r\n          newBlocks.push(block)\r\n        })\r\n        return newBlocks\r\n      },\r\n      importBlocksContent () {\r\n        if (this.blocksContent) {\r\n          this.nodes = merge([], this.blocksContent)\r\n        }\r\n      },\r\n      importScene () {\r\n        let scene = merge(this.defaultScene, this.scene)\r\n        let blocks = this.prepareBlocks(scene.blocks)\r\n        blocks = this.prepareBlocksLinking(blocks, scene.links)\r\n        // set last selected after update blocks from props\r\n        if (this.selectedBlock) {\r\n          let block = blocks.find(b => this.selectedBlock.id === b.id)\r\n          if (block) {\r\n            block.selected = true\r\n          }\r\n        }\r\n        this.blocks = blocks\r\n        this.links = merge([], scene.links)\r\n        let container = scene.container\r\n        if (container.centerX) {\r\n          this.centerX = container.centerX\r\n        }\r\n        if (container.centerY) {\r\n          this.centerY = container.centerY\r\n        }\r\n        if (container.scale) {\r\n          this.scale = container.scale\r\n        }\r\n      },\r\n      exportScene () {\r\n        let clonedBlocks = merge([], this.blocks)\r\n        let blocks = clonedBlocks.map(value => {\r\n          delete value['inputs']\r\n          delete value['outputs']\r\n          delete value['selected']\r\n          return value\r\n        })\r\n        return {\r\n          blocks: blocks,\r\n          links: this.links,\r\n          container: this.container\r\n        }\r\n      },\r\n      updateScene () {\r\n        this.$emit('update:scene', this.exportScene())\r\n      }\r\n    },\r\n    watch: {\r\n      blocksContent () {\r\n        this.importBlocksContent()\r\n      },\r\n      scene () {\r\n        this.importScene()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n    .vue-container {\r\n        position: relative;\r\n        overflow: hidden;\r\n        box-sizing: border-box;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlocksContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlocksContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VueBlocksContainer.vue?vue&type=template&id=60a4d6a4&scoped=true&\"\nimport script from \"./VueBlocksContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./VueBlocksContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VueBlocksContainer.vue?vue&type=style&index=0&id=60a4d6a4&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60a4d6a4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blocks-properties\"},[_vm._l((_vm.inputValues),function(p){return _c('div',{key:p.id,staticClass:\"property\"},[_c('label',{attrs:{\"for\":p.name}},[_vm._v(_vm._s(p.label)+\":\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(p.value),expression:\"p.value\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(p.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(p, \"value\", $event.target.value)}}})])}),_c('button',{on:{\"click\":function($event){$event.preventDefault();return _vm.save($event)}}},[_vm._v(\"Save\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"blocks-properties\">\r\n        <div class=\"property\" v-for=\"p in inputValues\" :key=\"p.id\">\r\n            <label :for=\"p.name\">{{p.label}}:</label>\r\n            <br>\r\n            <input type=\"text\" v-model=\"p.value\">\r\n        </div>\r\n        <button @click.prevent=\"save\">Save</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'VueBlockProperty',\r\n        props: {\r\n            inputValues: {\r\n                type: Array\r\n            },\r\n        },\r\n        methods: {\r\n            save() {\r\n                this.$emit('save', this.inputValues)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n    .blocks-properties {\r\n        position: relative;\r\n        right: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        min-height: 200px;\r\n        box-sizing: border-box;\r\n        padding: 10px;\r\n        background: #ffffff;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlockProperty.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlockProperty.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VueBlockProperty.vue?vue&type=template&id=ecf61e6c&scoped=true&\"\nimport script from \"./VueBlockProperty.vue?vue&type=script&lang=js&\"\nexport * from \"./VueBlockProperty.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VueBlockProperty.vue?vue&type=style&index=0&id=ecf61e6c&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ecf61e6c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div id=\"Flows\">\r\n        <div color=\"grey lighten-4\"\r\n                tile>\r\n            <v-toolbar dense >\r\n                <v-btn v-for=\"block in blocks\" :key=\"block.name\"\r\n                            class=\"ma-2\" style=\"width:150px;\"\r\n                           @click=\"addBlock(block.name)\">\r\n                            {{block.title || block.name}}\r\n                    </v-btn>\r\n            </v-toolbar>\r\n        </div>\r\n            <VueBlocksContainer ref=\"container\"\r\n                                :blocksContent=\"blocks\"\r\n                                :scene.sync=\"scene\"\r\n                                @blockSelect=\"selectBlock\"\r\n                                @blockDeselect=\"deselectBlock\"\r\n                                class=\"container\" />\r\n\r\n        <VueBlockProperty  v-bind:inputValues=\"selectedBlockProperty\" @save=\"saveProperty\" />\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import merge from 'deepmerge'\r\n    import VueBlocksContainer from '../vue-blocks'\r\n    import VueBlockProperty from '../vue-blocks/components/VueBlockProperty'\r\n\r\n    export default {\r\n        name: 'Flows',\r\n        components: {\r\n            VueBlocksContainer,\r\n            VueBlockProperty\r\n        },\r\n        data: function () {\r\n            return {\r\n                blocks: [\r\n                    {\r\n                        name: 'text',\r\n                        title: 'Request',\r\n                        type: 'Text',\r\n                        description: 'Request Name',\r\n                        fields: [\r\n                            {\r\n                                name: 'MessageTitle',\r\n                                label: 'Title',\r\n                                type: 'string',\r\n                                attr: 'property',\r\n                                value: 'Request Title'\r\n                            },\r\n                            {\r\n                                name: 'onRequest',\r\n                                type: 'init',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'Approver',\r\n                        title: 'Approver',\r\n                        type: 'Approver',\r\n                        description: 'Approver',\r\n                        fields: [\r\n                            {\r\n                                name: 'ApproverTitle',\r\n                                label: 'Level',\r\n                                type: 'Combobox',\r\n                                attr: 'property',\r\n                                value: 'Approver Level'\r\n                            },\r\n                            {\r\n                                name: 'inRequest',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'onRequest',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'decision',\r\n                        title: 'Decision (Yes/No)',\r\n                        type: 'logic',\r\n                        description: 'Decision Logic',\r\n                        fields: [\r\n                            {\r\n                                name: 'inRequest',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'onAcept',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            },\r\n                            {\r\n                                name: 'onReject',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'Attachment',\r\n                        family: 'Files',\r\n                        description: '',\r\n                        fields: [\r\n                            {\r\n                                name: 'file',\r\n                                label: 'File Name',\r\n                                type: 'inputfile',\r\n                                attr: 'property'\r\n                            },\r\n                            {\r\n                                name: 'onAttach',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'textarea',\r\n                        title: 'Description',\r\n                        type: 'Texttarea',\r\n                        description: 'Request Description',\r\n                        fields: [\r\n                            {\r\n                                name: 'MessageTitle',\r\n                                label: 'Title',\r\n                                type: 'string',\r\n                                attr: 'property',\r\n                                value: 'Request Title'\r\n                            },\r\n                            {\r\n                                name: 'onRequest',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'Start',\r\n                        title: 'Start',\r\n                        type: 'Begin',\r\n                        description: 'Begin',\r\n                        fields: [\r\n                            {\r\n                                name: 'inReject',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'Title',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'Description',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'Attachment',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            },\r\n                            {\r\n                                name: 'onRequest',\r\n                                type: 'event',\r\n                                attr: 'output'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        name: 'End',\r\n                        title: 'End',\r\n                        type: 'End',\r\n                        description: 'End',\r\n                        fields: [\r\n                            {\r\n                                name: 'inEnd',\r\n                                type: 'event',\r\n                                attr: 'input'\r\n                            }\r\n                        ]\r\n                    }\r\n                ],\r\n                scene: {\r\n                    blocks: [\r\n                        \r\n                    ],\r\n                    links: [\r\n                       \r\n                    ],\r\n                    container: {\r\n                        centerX: 1042,\r\n                        centerY: 140,\r\n                        scale: 1\r\n                    }\r\n                },\r\n                selectedBlock: null\r\n            }\r\n        },\r\n        computed: {\r\n            selectedBlockProperty() {\r\n                if (this.selectedBlock == null) {\r\n                    return null\r\n                }\r\n                console.log(this.selectedBlock.values)\r\n                return this.selectedBlock.values\r\n            },\r\n            selectBlocksType() {\r\n                return this.blocks.map(b => {\r\n                    return b.family\r\n                }).filter((value, index, array) => {\r\n                    return array.indexOf(value) === index\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            selectBlock(block) {\r\n                this.selectedBlock = block\r\n            },\r\n            deselectBlock(block) {\r\n                if (block == this.selectedBlock)\r\n                    this.selectedBlock = null\r\n                this.selectedBlock = null\r\n            },\r\n            filteredBlocks(type) {\r\n                return this.blocks.filter(value => {\r\n                    return value.family === type\r\n                })\r\n            },\r\n            saveProperty(val) {\r\n                console.log(val)\r\n                let scene = this.scene\r\n                let block = scene.blocks.find(b => {\r\n                    return b.id === this.selectedBlock.id\r\n                })\r\n                block.values.property = val\r\n                this.scene = merge({}, scene)\r\n            },\r\n            addBlock(name) {\r\n                this.$refs.container.addNewBlock(name)\r\n            }\r\n        },\r\n        watch: {\r\n            blocks(newValue) {\r\n                console.log('blocks', JSON.stringify(newValue))\r\n            },\r\n            scene(newValue) {\r\n                console.log('scene', JSON.stringify(newValue))\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"css\">\r\n    \r\n    #Flows {\r\n        width: calc(100% - 40px);\r\n        height: calc(100% - 40px);\r\n        padding: 20px 0 0 20px;\r\n    }\r\n\r\n    .container {\r\n        width: 100%;\r\n        height: calc(85% - 50px);\r\n        border: 1px solid #096e37;\r\n    }\r\n\r\n       \r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flows.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flows.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Flows.vue?vue&type=template&id=f5d5952e&\"\nimport script from \"./Flows.vue?vue&type=script&lang=js&\"\nexport * from \"./Flows.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Flows.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VToolbar})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlockProperty.vue?vue&type=style&index=0&id=ecf61e6c&lang=css&scoped=true&\"","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function(key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function(key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var sourceIsArray = Array.isArray(source);\n    var targetIsArray = Array.isArray(target);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n    if (!sourceAndTargetTypesMatch) {\n        return cloneIfNecessary(source, optionsArgument)\n    } else if (sourceIsArray) {\n        var arrayMerge = options.arrayMerge || defaultArrayMerge;\n        return arrayMerge(target, source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlock.vue?vue&type=style&index=0&id=0a80e481&lang=css&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueBlocksContainer.vue?vue&type=style&index=0&id=60a4d6a4&lang=css&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Flows.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}